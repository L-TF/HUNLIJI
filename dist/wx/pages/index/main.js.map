require("../../common/manifest.js.map")
require("../../common/vendor.js.map")
{"version":3,"sources":["webpack:///src/components/vabrrge/index.vue","webpack:///./src/components/vabrrge/index.vue?296d","webpack:///./src/components/barrageGroup.vue?2357","webpack:///./src/pages/index/index.vue?2792","webpack:///./src/pages/index/main.js","webpack:///./src/pages/index/index.vue","webpack:///./src/pages/index/index.vue?d024","webpack:///src/pages/index/index.vue","webpack:///./src/components/indexSwiper.vue","webpack:///./src/components/indexSwiper.vue?30af","webpack:///src/components/indexSwiper.vue","webpack:///./src/components/indexSwiper.vue?e225","webpack:///./src/components/barrageGroup.vue","webpack:///./src/components/barrageGroup.vue?3614","webpack:///src/components/barrageGroup.vue","webpack:///./src/components/vabrrge/index.vue","webpack:///./src/components/vabrrge/index.vue?bd0a"],"names":["app","Vue","App","$mount"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA,iBADA;AAEA;AACA;AACA;AAJA,KAFA;AAQA;AACA;AACA;AADA,KATA;AAYA;AACA;AACA,kBADA;AAEA;AAFA;AAbA,GADA;AAmBA,MAnBA,kBAmBA;AACA;AACA;AACA,qBAFA;AAGA;AACA,sBAJA;AAKA;AACA,kBANA;AAOA;AACA,iBARA;AASA;AACA,sBAVA;AAWA;AACA,uBAZA;AAaA;AACA,qBAdA;AAeA;AACA,wBAhBA;AAiBA;AACA,yBAlBA;AAmBA;AACA,uBApBA;AAqBA;AACA,iBACA,OADA,EAEA,UAFA;AAtBA;AA2BA,GA/CA;;AAgDA,cAhDA;AAkDA,SAlDA,qBAkDA,CAEA,CApDA;AAqDA,SArDA,qBAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA/DA;;AAgEA;AACA,OADA,eACA,IADA,EACA;AACA;AACA,KAHA;AAIA,WAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAVA;AAWA,WAXA,mBAWA,GAXA,EAWA;AACA;AACA;AAbA,GAhEA;AA+EA;AACA,sBADA,gCACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA,KAXA;AAYA,QAZA,kBAYA;AAAA;;AACA;AACA;;AAFA,iCAGA,CAHA;AAIA;;AAJA,qCAKA,EALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAhBA;AAiBA;AACA;AACA,kBADA;AAEA,mBAFA;AAGA,mBAHA;AAIA,wBAJA;AAKA;AALA;AAjCA;;AAKA;AAAA;AAmCA;AACA;AAzCA;;AAGA;AAAA;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA,KA5DA;;AA6DA;;;AAGA,cAhEA,wBAgEA;AACA;AACA;AACA;AACA;AACA,KArEA;;AAsEA;;;AAGA,iBAzEA,2BAyEA;AACA;AACA;AACA;AACA;AACA,KA9EA;;AA+EA;;;AAGA,cAlFA,sBAkFA,OAlFA,EAkFA,MAlFA,EAkFA,OAlFA,EAkFA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,2BAFA;AAGA,KA3HA;AA4HA,iBA5HA,yBA4HA,MA5HA,EA4HA,OA5HA,EA4HA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA;AAOA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA;AAIA,0CA5BA,CA4BA;AACA;AACA;AACA,KA3JA;;AA4JA;AACA,qBA7JA,6BA6JA,OA7JA,EA6JA;AACA;AACA;AAAA;AAAA;AACA;AACA,KAjKA;;AAkKA;AACA,WAnKA,qBAmKA;AACA;AACA;AACA;AACA;AACA,KAxKA;;AAyKA;AACA,UA1KA,oBA0KA;AACA;AACA,sBAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA5BA,EA4BA,iBA5BA;AA6BA;AA1MA,GA/EA;AA2RA;AA3RA,G;;;;;;;;AClBA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACF,kEAAS;AACxB,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C;;;;;;;;AC5BA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,2EAA2E,aAAa;AACxF;AACA,OAAO;AACP;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACF,kEAAS;AACxB,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C;;;;;;;;AC5JA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACF,kEAAS;AACxB,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA,IAAMA,MAAM,IAAIC,2CAAJ,CAAQC,uDAAR,CAAZ;AACAF,IAAIG,MAAJ,G;;;;;;;;ACJA;AAAA;AAAA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,EAAukB;AACjlB;AACA,yBAAyB,mBAAO,CAAC,CAAkF;AACnH;AAC+I;AAC/I;AAC6c;AAC7c;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,sJAAc;AAChB,EAAE,8WAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAEc,0EAAiB;;;;;;;;AC3ChC,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgCA;AACA;AACA;AACA;AACA;AACA,eADA;AAEA;AACA,wFADA;AAEA;AAFA,GAFA;AAMA,MANA,kBAMA;AACA;AACA;AACA,oBADA;AAEA;AAFA,OADA;AAKA;AALA;AAOA,GAdA;AAeA,QAfA,oBAeA;AACA;AACA;AACA;AACA;AACA;AACA,GArBA;;;AAuBA;AACA,aADA,uBACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mEAAK,CAAb;AACA,OAJA,MAIA;AACA;AACA;AACA,QAAQ,mEAAK,CAAb;AACA;AACA;AAZA,GAvBA;;AAsCA;AACA;AACA;AACA,sBADA;AAEA,+BAFA;AAGA;AAHA;AAKA;AA7CA,G;;;;;;;;ACpCA;AAAA;AAAA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,EAAokB;AAC9kB;AACA,yBAAyB,mBAAO,CAAC,CAA+E;AAChH;AACkJ;AAClJ;AAC6c;AAC7c;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,4JAAc;AAChB,EAAE,oXAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAEc,0EAAiB;;;;;;;;AC3ChC,yC;;;;;;;;;;;;;;;;;;;;;;;;ACgBA;AACA;AADA,G;;;;;;;;AChBA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACF,kEAAS;AACxB,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C;;;;;;;;AClCA;AAAA;AAAA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,EAAmkB;AAC7kB;AACA,yBAAyB,mBAAO,CAAC,CAA+E;AAChH;AACmJ;AACnJ;AAC8c;AAC9c;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,6JAAc;AAChB,EAAE,qXAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAEc,0EAAiB;;;;;;;;AC3ChC,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwCA;AACA;;AAEA;AACA,cADA;AAEA;AACA;AADA,GAFA;AAKA,MALA,kBAKA;AACA;AACA,aADA;AAEA,oBAFA;AAGA,uBAHA;AAIA,iBAJA;AAKA;AALA;AAOA,GAbA;AAcA,SAdA,qBAcA;AACA;AACA,GAhBA;;AAiBA;AACA;AACA,gBAFA,0BAEA;AACA,iBACA,SADA,EAEA,SAFA,EAGA,MAHA,EAIA,QAJA;AAMA;AACA;AACA;AACA;AACA,8BADA;AAEA;AAFA;AAIA,WALA,MAKA;AACA;AACA,kCADA;AAEA;AAFA;AAIA;AACA;AACA;AACA,KAxBA;;AAyBA;AACA,eA1BA,yBA0BA;AACA;AACA;AACA,mCADA;AAEA,mCAFA;AAGA,sBAHA;AAIA;AACA,wBADA;AAEA;AAFA,WAJA;AAQA;AARA;AAUA,OAXA,MAWA;AACA;AACA,mCADA;AAEA,mCAFA;AAGA,sBAHA;AAIA;AACA;AADA,WAJA;AAOA;AAPA;AASA;AACA;AACA;AAlDA;AAjBA,G;;;;;;;;AC3CA;AAAA;AAAA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,EAAskB;AAChlB;AACA,yBAAyB,mBAAO,CAAC,CAAkF;AACnH;AAC+I;AAC/I;AAC8c;AAC9c;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,sJAAc;AAChB,EAAE,+WAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAEc,0EAAiB;;;;;;;;AC3ChC,yC","file":"pages/index/main.js","sourcesContent":["<template>\r\n  <section class=\"barrage-wrapper\"\r\n           ref=\"barrageWrapper\"\r\n           :style=\"{height:percent+'%'}\">\r\n    <div class=\"barrage-main\">\r\n      <div class=\"barrage-main-dm\"\r\n           :class=\"{'ani-pause':isPause,'ani-running':!isPause}\"\r\n           ref=\"barrageMainDm\">\r\n           \r\n            <div class=\"barrage-item top-item self-dm\">\r\n                123\r\n            </div>\r\n           </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    // 弹幕源数组\r\n    arr: {\r\n      type: Array,\r\n      default: function () {\r\n        return []\r\n      }\r\n    },\r\n    // 弹幕是否暂停状态\r\n    isPause: {\r\n      type: Boolean\r\n    },\r\n    // 弹幕占比\r\n    percent: {\r\n      type: Number,\r\n      default: 80\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      // 每行弹幕数最大值\r\n      MAX_DM_COUNT: 5,\r\n      // 行数\r\n      CHANNEL_COUNT: 8,\r\n      // 弹幕数组\r\n      barrages: [],\r\n      // dom池\r\n      domPool: [],\r\n      // intervalDM\r\n      intervalDM: null,\r\n      // 取弹幕时间间隔\r\n      interValTime: 500,\r\n      // 滚动弹幕的通道\r\n      hasPosition: [],\r\n      // 顶部弹幕的通道\r\n      hasTopPosition: [],\r\n      // 弹幕容器\r\n      barrageMainDm: null,\r\n      // 弹幕容器宽度\r\n      barMainWidth: 500,\r\n      // 自定义弹幕样式属性列表\r\n      dmStyles: [\r\n        'color',\r\n        'fontSize'\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  created () {\r\n\r\n  },\r\n  mounted () {\r\n    this.barrageMainDm = this.$refs.barrageMainDm;\r\n    // 缓存容器宽度\r\n    this.barMainWidth = this.barrageMainDm.clientWidth;\r\n    // 初始化弹幕dom组\r\n    // this.init();\r\n    // 开始播放弹幕\r\n    this.playDm();\r\n    // 注册页面监听器\r\n    // document.addEventListener(\"visibilitychange\", this.visibilitychangeFn);\r\n  },\r\n  watch: {\r\n    arr (list) {\r\n      this.barrages = list;\r\n    },\r\n    isPause (val) {\r\n      if (val) {\r\n        this.pauseDm();\r\n      } else {\r\n        this.playDm();\r\n      }\r\n    },\r\n    percent (val) {\r\n      this.CHANNEL_COUNT = val / 10;\r\n    }\r\n  },\r\n  methods: {\r\n    visibilitychangeFn () {\r\n      if (!document.hidden) {\r\n        //处于当前页面\r\n        this.playDm();\r\n        console.log('进入页面');\r\n      } else {\r\n        console.log('离开页面');\r\n        clearInterval(this.intervalDM);\r\n        this.intervalDM = null;\r\n      }\r\n    },\r\n    init () {\r\n      let wrapper = this.$refs.barrageMainDm;\r\n      // 先new一些div 重复利用这些DOM\r\n      for (let j = 0; j < this.CHANNEL_COUNT; j++) {\r\n        let doms = [];\r\n        for (let i = 0; i < this.MAX_DM_COUNT; i++) {\r\n          // 初始化dom\r\n          let dom = document.createElement('div');\r\n          // 初始化dom的位置 通过设置className\r\n          dom.className = 'barrage-item';\r\n          dom.style.transform = `translate3d(${this.barMainWidth}px,0,0)`\r\n          // DOM的通道是固定的 所以设置好top就不需要再改变了\r\n          dom.style.top = j * (this.barrageMainDm.clientHeight / this.CHANNEL_COUNT) + 'px';\r\n          console.log(dom.style.top)\r\n          // 每次到animationend结束的时候 就是弹幕划出屏幕了 将DOM位置重置 再放回DOM池\r\n          dom.addEventListener('animationend', (e) => {\r\n            // 初始化dom样式\r\n            dom.className = 'barrage-item';\r\n            dom.style.transform = `translate3d(${this.barMainWidth}px,0,0)`\r\n            dom.style.animation = null;\r\n            // 清空自定义样式\r\n            this.dmStyles.forEach(key => {\r\n              dom.style[key] = null;\r\n            })\r\n            // this.domPool[j].push({ el: dom });\r\n            // 动画结束后设置当前dom为空闲状态\r\n            // console.log(i, j)\r\n            if (this.domPool[i][j]) {\r\n              this.domPool[i][j].isFree = false;\r\n            }\r\n            // console.log(dom)\r\n          });\r\n          // 放入该通道的DOM池\r\n          doms.push({\r\n            row: j,\r\n            col: i,\r\n            el: dom,\r\n            isUse: false,\r\n            isFree: false\r\n          });\r\n        }\r\n        this.domPool.push(doms);\r\n      }\r\n      // hasPosition 标记每个通道目前是否有位置\r\n      for (let i = 0; i < this.CHANNEL_COUNT; i++) {\r\n        this.hasPosition[i] = true;\r\n        this.hasTopPosition[i] = true;\r\n      }\r\n    },\r\n    /**\r\n     * 获取一个可以发射弹幕的通道 没有则返回-1\r\n     */\r\n    getChannel () {\r\n      for (let i = 0; i < this.CHANNEL_COUNT; i++) {\r\n        if (this.hasPosition[i] && this.domPool[i].length) return i;\r\n      }\r\n      return -1;\r\n    },\r\n    /**\r\n    * 获取一个可以发射顶部弹幕的通道 没有则返回-1\r\n    */\r\n    getTopChannel () {\r\n      for (let i = 0; i < this.CHANNEL_COUNT; i++) {\r\n        if (this.hasTopPosition[i]) return i;\r\n      }\r\n      return -1;\r\n    },\r\n    /**\r\n    * 根据DOM和弹幕信息 发射弹幕\r\n    */\r\n    shootDanmu (domItem, dmItem, channel) {\r\n      // 设置当前通道为false\r\n      this.hasPosition[channel] = false;\r\n      //获取dom\r\n      let dom = domItem.el;\r\n      // 是否已经使用的dom\r\n      if (!domItem.isUse && this.barrageMainDm) {\r\n        domItem.isUse = true;\r\n        this.barrageMainDm.appendChild(domItem.el);\r\n      }\r\n      // 判断是否有自定义样式\r\n      if (dmItem.style) {\r\n        let keys = Object.keys(dmItem.style);\r\n        let self = this;\r\n        keys.forEach(key => {\r\n          // 检查样式属性是否合法\r\n          let isStyle = self.dmStyles.includes(key)\r\n          if (isStyle) {\r\n            dom.style[key] = dmItem.style[key];\r\n          }\r\n        });\r\n      }\r\n      domItem.isFree = true;\r\n      // console.log('biu~ [' + dmItem.content + ']');\r\n      // dom.innerText = dmItem.content;\r\n      // 判断是否是js弹幕\r\n      if (dmItem.isJs) {\r\n        dom.innerHTML = dmItem.content;\r\n      } else {\r\n        dom.innerText = dmItem.content;\r\n      }\r\n      // 设置弹幕的位置信息 性能优化 left -> transform\r\n      // dom.style.transform = `translateX(${-dom.clientWidth}px)`;\r\n      // dom.style.transform = `translate3d(${-dom.clientWidth}px,0,0)`; // css硬件加速\r\n      dom.className = dmItem.isSelf ? 'barrage-item self-dm' : 'barrage-item';\r\n      dom.style.animation = 'barrage-run 5s linear';\r\n      // 弹幕全部显示之后 才能开始下一条弹幕\r\n      // 大概 dom.clientWidth * 10 的时间 该条弹幕就从右边全部划出到可见区域 再加1秒保证弹幕之间距离\r\n      setTimeout(() => {\r\n        this.hasPosition[channel] = true;\r\n      }, dom.clientWidth * 10 + 1000);\r\n    },\r\n    shootTopDanmu (dmItem, channel) {\r\n      // 设置当前通道为false\r\n      this.hasTopPosition[channel] = false;\r\n      //获取dom\r\n      let dom = document.createElement('div');\r\n      dom.className = dmItem.isSelf ? 'barrage-item top-item self-dm' : 'barrage-item top-item';\r\n      // 判断是否有自定义样式\r\n      if (dmItem.style) {\r\n        let keys = Object.keys(dmItem.style);\r\n        let self = this;\r\n        keys.forEach(key => {\r\n          // 检查样式属性是否合法\r\n          let isStyle = self.dmStyles.includes(key)\r\n          if (isStyle) {\r\n            dom.style[key] = dmItem.style[key];\r\n          }\r\n        });\r\n      }\r\n      // 判断是否是js弹幕\r\n      if (dmItem.isJs) {\r\n        dom.innerHTML = dmItem.content;\r\n      } else {\r\n        dom.innerText = dmItem.content;\r\n      }\r\n      dom.addEventListener('animationend', () => {\r\n        this.barrageMainDm.removeChild(dom)\r\n        this.hasTopPosition[channel] = true;\r\n      })\r\n      this.barrageMainDm.appendChild(dom); // 一定要在获取宽度和执行动画之前渲染dom\r\n      dom.style.transform = `translate3d(${this.barMainWidth / 2 - (dom.clientWidth / 2)}px,${channel * dom.clientHeight}px,0)`\r\n      dom.style.animation = 'barrage-fade 3s';\r\n    },\r\n    // 获取空闲通道中空闲的dom\r\n    getFreeChannelDom (channel) {\r\n      let item;\r\n      item = this.domPool[channel].find(it => !it.isFree)\r\n      return item\r\n    },\r\n    // 暂停弹幕\r\n    pauseDm () {\r\n      if (this.intervalDM) {\r\n        clearInterval(this.intervalDM)\r\n        this.intervalDM = null;\r\n      }\r\n    },\r\n    // 播放弹幕\r\n    playDm () {\r\n      // 每隔1ms从弹幕池里获取弹幕（如果有的话）并发射\r\n      let self = this; // 这里取一个self this 为了方便调试的时候看到this具体内容\r\n      self.intervalDM = setInterval(() => {\r\n        // let channel;\r\n        // if (self.barrages.length && (channel = self.getChannel()) != -1) {\r\n        //   let domItem = self.getFreeChannelDom(channel);\r\n        //   // let domItem = self.domPool[channel].shift();\r\n        //   if (domItem) {\r\n        //     let danmu = self.barrages.shift();\r\n        //     self.shootDanmu(domItem, danmu, channel);\r\n        //   }\r\n        // }\r\n        // 更新逻辑\r\n        if (self.barrages.length > 0) {\r\n          let channel;\r\n          let topChannel;\r\n          let barrage = self.barrages.shift();\r\n          if (barrage.direction == 'top' && (topChannel = self.getTopChannel()) != -1) {\r\n            // top....\r\n            self.shootTopDanmu(barrage, topChannel);\r\n          }\r\n          if (barrage.direction == 'default' && (channel = self.getChannel()) != -1) {\r\n            // default....\r\n            let domItem = self.getFreeChannelDom(channel);\r\n            if (domItem) {\r\n              // let danmu = self.barrages.shift();\r\n              self.shootDanmu(domItem, barrage, channel);\r\n            }\r\n          }\r\n        }\r\n      }, self.interValTime);\r\n    }\r\n  },\r\n  components: {\r\n\r\n  },\r\n};\r\n</script>\r\n<style  lang=\"scss\">\r\n.barrage-wrapper {\r\n  * {\r\n    margin: 0px;\r\n    padding: 0px;\r\n  }\r\n  z-index: 1;\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  .barrage-item {\r\n    z-index: 99;\r\n    position: absolute;\r\n    // left: 0px;\r\n    // top: 0px;\r\n    // transform: translateX(-100%);\r\n    // padding: 5px 0px;\r\n    user-select: none; // 禁用选择文字\r\n    position: absolute;\r\n    white-space: pre;\r\n    cursor: pointer;\r\n    // pointer-events: none;\r\n    // perspective: 500px;\r\n    display: inline-block;\r\n    will-change: transform;\r\n    font-size: 25px;\r\n    color: rgb(255, 255, 255);\r\n    font-family: SimHei, \"Microsoft JhengHei\", Arial, Helvetica, sans-serif;\r\n    font-weight: bold;\r\n    line-height: 1.125;\r\n    opacity: 1;\r\n    text-shadow: rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px,\r\n      rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px;\r\n    &:hover {\r\n      color: red;\r\n      animation-play-state: paused !important;\r\n      z-index: 150;\r\n    }\r\n  }\r\n  .top-item {\r\n    z-index: 100;\r\n  }\r\n  .barrage-main {\r\n    /* border: 2px solid blue; */\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    overflow: hidden;\r\n    // background: #000;\r\n  }\r\n  .barrage-main-dm {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n    top: 0;\r\n  }\r\n}\r\n.self-dm {\r\n  border: 2px solid #87ceeb;\r\n  box-sizing: border-box;\r\n}\r\n@keyframes barrage-run {\r\n  0% {\r\n    // transform: translate3d(500px, 0, 0);\r\n  }\r\n\r\n  100% {\r\n    transform: translate3d(-100%, 0, 0);\r\n  }\r\n}\r\n@keyframes barrage-fade {\r\n  0% {\r\n    visibility: visible;\r\n    // opacity: 1;\r\n  }\r\n  100% {\r\n    visibility: hidden;\r\n    // opacity: 0;\r\n  }\r\n}\r\n.ani-pause {\r\n  & div {\r\n    animation-play-state: paused !important;\r\n  }\r\n}\r\n.ani-running {\r\n  & div {\r\n    animation-play-state: running !important;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/vabrrge/index.vue?fbc6df7e","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', {\n    ref: \"barrageWrapper\",\n    staticClass: \"barrage-wrapper\",\n    style: ({\n      height: _vm.percent + '%'\n    })\n  }, [_c('div', {\n    staticClass: \"barrage-main\"\n  }, [_c('div', {\n    ref: \"barrageMainDm\",\n    staticClass: \"barrage-main-dm\",\n    class: {\n      'ani-pause': _vm.isPause, 'ani-running': !_vm.isPause\n    }\n  }, [_c('div', {\n    staticClass: \"barrage-item top-item self-dm\"\n  }, [_vm._v(\"\\n              123\\n          \")])])])])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-5ed08bcc\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler?{\"id\":\"data-v-5ed08bcc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"fileExt\":{\"template\":\"wxml\",\"script\":\"js\",\"style\":\"wxss\",\"platform\":\"wx\"}}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=template&index=0!./src/components/vabrrge/index.vue\n// module id = 105\n// module chunks = 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"home\"\n  }, [_c('h2', {\n    staticStyle: {\n      \"text-align\": \"center\"\n    }\n  }, [_vm._v(\"Vue-barrage 基于vue的弹幕组件\")]), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"height\": \"400px\",\n      \"width\": \"800px\",\n      \"position\": \"relative\",\n      \"margin\": \"0px auto\",\n      \"background\": \"#000\"\n    }\n  }, [_c('v-barrage', {\n    attrs: {\n      \"arr\": _vm.arr,\n      \"isPause\": _vm.isPause,\n      \"percent\": 100,\n      \"mpcomid\": '0'\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"barrage-control\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.sendContent),\n      expression: \"sendContent\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"回车发送\",\n      \"id\": \"sendContent\",\n      \"eventid\": '2_0'\n    },\n    domProps: {\n      \"value\": (_vm.sendContent)\n    },\n    on: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.sendBarrage($event)\n      },\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.sendContent = $event.target.value\n      }\n    }\n  }), _vm._v(\"\\n    方向:\\n    \"), _c('select', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.direction),\n      expression: \"direction\"\n    }],\n    staticStyle: {\n      \"margin\": \"0px 12px\"\n    },\n    attrs: {\n      \"eventid\": '2_1'\n    },\n    on: {\n      \"change\": function($event) {\n        var $$selectedVal = Array.prototype.filter.call($event.target.options, function(o) {\n          return o.selected\n        }).map(function(o) {\n          var val = \"_value\" in o ? o._value : o.value;\n          return val\n        });\n        _vm.direction = $event.target.multiple ? $$selectedVal : $$selectedVal[0]\n      }\n    }\n  }, [_c('option', {\n    attrs: {\n      \"value\": \"default\"\n    }\n  }, [_vm._v(\"默认\")]), _vm._v(\" \"), _c('option', {\n    attrs: {\n      \"value\": \"top\"\n    }\n  }, [_vm._v(\"顶部\")])], 1), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.isJs),\n      expression: \"isJs\"\n    }],\n    attrs: {\n      \"type\": \"checkbox\",\n      \"eventid\": '2_2'\n    },\n    domProps: {\n      \"checked\": Array.isArray(_vm.isJs) ? _vm._i(_vm.isJs, null) > -1 : (_vm.isJs)\n    },\n    on: {\n      \"__c\": function($event) {\n        var $$a = _vm.isJs,\n          $$el = $event.target,\n          $$c = $$el.checked ? (true) : (false);\n        if (Array.isArray($$a)) {\n          var $$v = null,\n            $$i = _vm._i($$a, $$v);\n          if ($$c) {\n            $$i < 0 && (_vm.isJs = $$a.concat($$v))\n          } else {\n            $$i > -1 && (_vm.isJs = $$a.slice(0, $$i).concat($$a.slice($$i + 1)))\n          }\n        } else {\n          _vm.isJs = $$c\n        }\n      }\n    }\n  }), _vm._v(\" js弹幕(直接写代码)\\n    \"), _c('button', {\n    staticStyle: {\n      \"margin-left\": \"25px\"\n    },\n    attrs: {\n      \"id\": \"sendBarrageBtn\",\n      \"eventid\": '2_3'\n    },\n    on: {\n      \"click\": _vm.sendBarrage\n    }\n  }, [_vm._v(\"发送\")]), _vm._v(\" \"), _c('button', {\n    attrs: {\n      \"id\": \"pauseBtn\",\n      \"eventid\": '2_4'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.isPause = true\n      }\n    }\n  }, [_vm._v(\"暂停\")]), _vm._v(\" \"), _c('button', {\n    attrs: {\n      \"id\": \"startBtn\",\n      \"eventid\": '2_5'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.isPause = false\n      }\n    }\n  }, [_vm._v(\"开始\")])], 1)], 1)\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-539f884a\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler?{\"id\":\"data-v-539f884a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"fileExt\":{\"template\":\"wxml\",\"script\":\"js\",\"style\":\"wxss\",\"platform\":\"wx\"}}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=template&index=0!./src/components/barrageGroup.vue\n// module id = 106\n// module chunks = 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"index\"\n  }, [_c('div', {\n    staticClass: \"bg-swiper\"\n  }, [_c('index-swiper', {\n    attrs: {\n      \"mpcomid\": '0'\n    }\n  })], 1), _vm._v(\" \"), _c('img', {\n    staticClass: \"inv\",\n    attrs: {\n      \"src\": \"../../../static/images/inv.png\"\n    }\n  }), _vm._v(\" \"), (_vm.isPlay) ? _c('div', {\n    staticClass: \"bg_music\",\n    attrs: {\n      \"eventid\": '1_1'\n    },\n    on: {\n      \"tap\": _vm.audioPlay\n    }\n  }, [_c('img', {\n    staticClass: \"musicImg music_icon\",\n    attrs: {\n      \"src\": \"../../../static/images/music_icon.png\"\n    }\n  }), _vm._v(\" \"), _c('img', {\n    staticClass: \"music_play pauseImg\",\n    attrs: {\n      \"src\": \"../../../static/images/music_play.png\"\n    }\n  })]) : _c('div', {\n    staticClass: \"bg_music\",\n    attrs: {\n      \"eventid\": '1_0'\n    },\n    on: {\n      \"tap\": _vm.audioPlay\n    }\n  }, [_c('img', {\n    staticClass: \"musicImg\",\n    attrs: {\n      \"src\": \"../../../static/images/music_icon.png\"\n    }\n  }), _vm._v(\" \"), _c('img', {\n    staticClass: \"music_play playImg\",\n    attrs: {\n      \"src\": \"../../../static/images/music_play.png\"\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"info\",\n    attrs: {\n      \"animation\": _vm.animationData\n    }\n  }, [_c('div', {\n    staticClass: \"content\"\n  }, [_c('h1', [_vm._v(\"雷腾飞 \"), _c('span', [_vm._v(\"❤\")]), _vm._v(\" 王楠楠\")]), _vm._v(\" \"), _c('p', [_vm._v(\"谨定于 2020年05月1日（星期六）\")]), _vm._v(\" \"), _c('p', [_vm._v(\"农历 三月二十  举办婚礼\")]), _vm._v(\" \"), _c('p', [_vm._v(\"席设：宏泰酒店\")]), _vm._v(\" \"), _c('p', [_vm._v(\"地址：地图开发中\")]), _vm._v(\" \"), _c('img', {\n    staticClass: \"img_footer\",\n    attrs: {\n      \"src\": \"../../../static/images/we.png\"\n    }\n  })], 1)])])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-6b1ce7cd\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler?{\"id\":\"data-v-6b1ce7cd\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"fileExt\":{\"template\":\"wxml\",\"script\":\"js\",\"style\":\"wxss\",\"platform\":\"wx\"}}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/index/index.vue\n// module id = 107\n// module chunks = 2","import Vue from 'vue'\nimport App from './index'\n\nconst app = new Vue(App)\napp.$mount()\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/index/main.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6b1ce7cd\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!stylus-loader?{\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6b1ce7cd\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"fileExt\\\":{\\\"template\\\":\\\"wxml\\\",\\\"script\\\":\\\"js\\\",\\\"style\\\":\\\"wxss\\\",\\\"platform\\\":\\\"wx\\\"}}!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6b1ce7cd\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/pages/index/index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-6b1ce7cd\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-6b1ce7cd\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index/index.vue\n// module id = 88\n// module chunks = 2","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@4.1.3@vue-style-loader!./node_modules/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6b1ce7cd\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./node_modules/_stylus-loader@3.0.2@stylus-loader?{\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/index/index.vue\n// module id = 89\n// module chunks = 2","<template>\n    <div class=\"index\">\n      <!-- 主页面图片 -->\n      <!-- <barrageGroup :bullets=\"bullets\" :paused='false'></barrageGroup> -->\n        <div class=\"bg-swiper\">\n            <index-swiper ></index-swiper>\n        </div>\n        <img class=\"inv\" src=\"../../../static/images/inv.png\"/>\n        <!-- 背景音乐 -->\n        <div class=\"bg_music\" v-if=\"isPlay\" @tap=\"audioPlay\">\n            <img src=\"../../../static/images/music_icon.png\" class=\"musicImg music_icon\"/>\n            <img src=\"../../../static/images/music_play.png\" class=\"music_play pauseImg\"/>\n        </div>\n        <div class=\"bg_music\" v-else @tap=\"audioPlay\">\n            <img src=\"../../../static/images/music_icon.png\" class=\"musicImg\"/>\n            <img src=\"../../../static/images/music_play.png\" class=\"music_play playImg\"/>\n        </div>\n        <!-- 邀请函详情 -->\n        <div class=\"info\" :animation=\"animationData\">\n            <div class=\"content\">\n                <h1>雷腾飞 <span>❤</span> 王楠楠</h1>\n                <p>谨定于 2020年05月1日（星期六）</p>\n                <p>农历 三月二十  举办婚礼</p>\n                <p>席设：宏泰酒店</p>\n                <p>地址：地图开发中</p>\n                <img src=\"../../../static/images/we.png\" class=\"img_footer\"/>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport IndexSwiper from 'components/indexSwiper'\nimport barrageGroup from 'components/barrageGroup'\nimport tools from '../../common/js/h_tools'\nconst audioCtx = wx.createInnerAudioContext()\nexport default {\n  name: 'Index',\n  components: {\n    IndexSwiper,\n    barrageGroup\n  },\n  data () {\n    return {\n      bullets:{\n        frequency:1,\n        msglist:[1,2,3,4,5,6,67,7,78,8]\n      },\n      isPlay: true\n    }\n  },\n  onShow () {\n    const that = this\n    that.isPlay = true\n    // 音乐\n    audioCtx.src = 'cloud://bertlearning-62870c.6265-bertlearning-62870c/music/yudao.mp3'\n    audioCtx.autoplay = true\n  },\n\n  methods: {\n    audioPlay () {\n      const that = this\n      if (that.isPlay) {\n        audioCtx.pause()\n        that.isPlay = false\n        tools.showToast('您已暂停音乐播放~')\n      } else {\n        audioCtx.play()\n        that.isPlay = true\n        tools.showToast('背景音乐已开启~')\n      }\n    }\n  },\n\n  // 自定义转发内容\n  onShareAppMessage: function (res) {\n    return {\n      title: '自定义分享内容',\n      path: '/pages/index/main',\n      imageUrl: 'https://img-blog.csdnimg.cn/20190918091410914.gif'\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n@-webkit-keyframes musicRotate\n  from\n    -webkit-transformb rotate(0deg)\n  to\n    -webkit-transform rotate(360deg)\n@-webkit-keyframes musicStop\n  from\n    -webkit-transform rotate(20deg)\n  to\n    -webkit-transform rotate(0deg)\n@-webkit-keyframes musicStart\n  from\n    -webkit-transform rotate(0deg)\n  to\n    -webkit-transform rotate(20deg)\n@-webkit-keyframes infoAnimation\n  0%\n    -webkit-transform scale(1) translate(0, 0)\n  50%\n    -webkit-transform scale(.9) translate(5px, 5px)\n  100%\n    -webkit-transform scale(1) translate(0, 0)\n.index\n  height 100%\n  position relative\n  .img\n    width 100%\n    height 100%\n  .bg-swiper\n    width 100%\n    height 100%\n  .inv\n    position absolute\n    top 20rpx\n    left 89rpx\n    width 572rpx\n    height 69rpx\n    z-index 9\n  .bg_music\n    position fixed\n    right 0\n    top 20rpx\n    width 100rpx\n    z-index 99\n    display flex\n    justify-content flex-start\n    align-items flex-start\n    .musicImg\n      width 60rpx\n      height 60rpx\n    .music_icon\n      animation musicRotate 3s linear infinite\n    .music_play\n      width 28rpx\n      height 60rpx\n      margin-left -10rpx\n      transform-origin top\n      -webkit-transform rotate(20deg)\n    .playImg\n      animation musicStop 1s linear forwards\n    .pauseImg\n      animation musicStart 1s linear forwards\n  .info\n    width 630rpx\n    background rgba(255, 255, 255, 0.75)\n    z-index 9\n    position fixed\n    bottom 40rpx\n    left 50rpx\n    padding 10rpx\n    animation infoAnimation 12s linear infinite\n    .content\n      width 626rpx\n      border 1rpx solid #000\n      display flex\n      flex-direction column\n      justify-content flex-start\n      align-items center\n      position relative\n      padding-bottom 30rpx\n      h1\n        font-size 50rpx\n        height 100rpx\n        line-height 100rpx\n        span\n          color red\n      p\n        font-size 24rpx\n        height 60rpx\n        line-height 60rpx\n      .img_footer\n        position absolute\n        bottom 0\n        left 53rpx\n        z-index 99\n        height 14rpx\n        width 520rpx\n  #myAudio\n    display none\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/index/index.vue?9bb03baa","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f948e84\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!stylus-loader?{\\\"sourceMap\\\":false}!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=styles&index=0!./indexSwiper.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=script&index=0!./indexSwiper.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f948e84\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"fileExt\\\":{\\\"template\\\":\\\"wxml\\\",\\\"script\\\":\\\"js\\\",\\\"style\\\":\\\"wxss\\\",\\\"platform\\\":\\\"wx\\\"}}!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=template&index=0!./indexSwiper.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2f948e84\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/components/indexSwiper.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] indexSwiper.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-2f948e84\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-2f948e84\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/indexSwiper.vue\n// module id = 91\n// module chunks = 2","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@4.1.3@vue-style-loader!./node_modules/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2f948e84\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./node_modules/_stylus-loader@3.0.2@stylus-loader?{\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=styles&index=0!./src/components/indexSwiper.vue\n// module id = 92\n// module chunks = 2","<template>\n    <div class=\"box\">\n        <swiper class=\"swiper\"\n            :autoplay=\"true\"\n            :circular=\"true\"\n            current=0\n            :vertical=\"true\"\n        >\n            <swiper-item class=\"item\">\n                <!-- 首页照片 -->\n                <img mode=\"aspectFill\" lazy-load=\"true\" src=\"../../static/photo/1.jpg\" class=\"slide-image\"/>\n            </swiper-item>\n        </swiper>\n    </div>\n</template>\n<script>\nexport default {\n  name: 'IndexSwiper'\n}\n</script>\n<style lang=\"stylus\" scoped>\n.box\n    position relative\n    height 100%\n    .swiper\n        height 100%\n        width 100%\n        .item\n            width 100%\n            height 100%\n            display flex\n            justify-content center\n            align-items: center\n            .slide-image\n                min-height 100%\n                min-width 100%\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/indexSwiper.vue?4ecb2e42","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"box\"\n  }, [_c('swiper', {\n    staticClass: \"swiper\",\n    attrs: {\n      \"autoplay\": true,\n      \"circular\": true,\n      \"current\": \"0\",\n      \"vertical\": true\n    }\n  }, [_c('swiper-item', {\n    staticClass: \"item\",\n    attrs: {\n      \"mpcomid\": '0'\n    }\n  }, [_c('img', {\n    staticClass: \"slide-image\",\n    attrs: {\n      \"mode\": \"aspectFill\",\n      \"lazy-load\": \"true\",\n      \"src\": \"../../static/photo/1.jpg\"\n    }\n  })])], 1)], 1)\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-2f948e84\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler?{\"id\":\"data-v-2f948e84\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"fileExt\":{\"template\":\"wxml\",\"script\":\"js\",\"style\":\"wxss\",\"platform\":\"wx\"}}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=template&index=0!./src/components/indexSwiper.vue\n// module id = 94\n// module chunks = 2","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-539f884a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!sass-loader?{\\\"sourceMap\\\":false}!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=styles&index=0!./barrageGroup.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=script&index=0!./barrageGroup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-539f884a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"fileExt\\\":{\\\"template\\\":\\\"wxml\\\",\\\"script\\\":\\\"js\\\",\\\"style\\\":\\\"wxss\\\",\\\"platform\\\":\\\"wx\\\"}}!../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=template&index=0!./barrageGroup.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-539f884a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/components/barrageGroup.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] barrageGroup.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-539f884a\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-539f884a\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/barrageGroup.vue\n// module id = 95\n// module chunks = 2","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@4.1.3@vue-style-loader!./node_modules/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-539f884a\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./node_modules/_sass-loader@5.0.1@sass-loader/lib/loader.js?{\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=styles&index=0!./src/components/barrageGroup.vue\n// module id = 96\n// module chunks = 2","<template>\r\n  <div class=\"home\">\r\n    <h2 style=\" text-align: center;\">Vue-barrage 基于vue的弹幕组件</h2>\r\n    <div style=\"height:400px;width:800px; position: relative;margin:0px auto;background:#000;\">\r\n      <!-- <video controls\r\n             src=\"@/assets/1.mp4\"\r\n             autoplay\r\n             style=\"width:100%;height:100%;z-index:2;\" /> -->\r\n      <!-- 确保父元素是相对定位，弹幕容器是绝对定位 -->\r\n      <v-barrage :arr=\"arr\"\r\n                 :isPause=\"isPause\"\r\n                 :percent=\"100\">\r\n      </v-barrage>\r\n    </div>\r\n    <div class=\"barrage-control\">\r\n      <input type=\"text\"\r\n             v-model=\"sendContent\"\r\n             placeholder=\"回车发送\"\r\n             id=\"sendContent\"\r\n             @keyup.enter=\"sendBarrage\" />\r\n      方向:\r\n      <select style=\"margin:0px 12px;\"\r\n              v-model=\"direction\">\r\n        <option value=\"default\">默认</option>\r\n        <option value=\"top\">顶部</option>\r\n      </select>\r\n      <input type=\"checkbox\"\r\n             v-model=\"isJs\" /> js弹幕(直接写代码)\r\n      <button id=\"sendBarrageBtn\"\r\n              style=\"margin-left:25px;\"\r\n              @click=\"sendBarrage\">发送</button>\r\n      <button id=\"pauseBtn\"\r\n              @click=\"isPause=true\">暂停</button>\r\n      <button id=\"startBtn\"\r\n              @click=\"isPause=false\">开始</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport VBarrage from './vabrrge/index.vue'\r\n\r\nexport default {\r\n  name: 'home',\r\n  components: {\r\n    VBarrage\r\n  },\r\n  data () {\r\n    return {\r\n      arr: [],\r\n      isPause: false,\r\n      sendContent: null,\r\n      isJs: false,\r\n      direction: 'default'\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initTestData();\r\n  },\r\n  methods: {\r\n    // 初始化模拟弹幕数据\r\n    initTestData () {\r\n      let arr = [\r\n        '这是一条有弹幕',\r\n        '今天去打LOL',\r\n        '可以吗？',\r\n        '一起嗨！！！'\r\n      ]\r\n      for (let i = 0; i < 6; i++) {\r\n        for (let index = 0; index < 1000; index++) {\r\n          if (index % 2 == 0) {\r\n            this.arr.push({\r\n              direction: 'top',\r\n              content: arr[parseInt(Math.random() * arr.length)]\r\n            })\r\n          } else {\r\n            this.arr.push({\r\n              direction: 'default',\r\n              content: arr[parseInt(Math.random() * arr.length)]\r\n            })\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 发送弹幕\r\n    sendBarrage () {\r\n      if (this.arr.length > 1 && this.sendContent != '' && this.sendContent != null) {\r\n        this.arr.unshift({\r\n          content: this.sendContent,\r\n          direction: this.direction,\r\n          isSelf: true,\r\n          style: {\r\n            color: 'red',\r\n            fontSize: '25px'\r\n          },\r\n          isJs: this.isJs\r\n        });\r\n      } else {\r\n        this.arr.push({\r\n          content: this.sendContent,\r\n          direction: this.direction,\r\n          isSelf: true,\r\n          style: {\r\n            color: 'red'\r\n          },\r\n          isJs: this.isJs\r\n        });\r\n      }\r\n      this.sendContent = null;\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.barrage-control {\r\n  text-align: center;\r\n  margin: 10px 0px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/barrageGroup.vue?b16695fa","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ed08bcc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!sass-loader?{\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ed08bcc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"fileExt\\\":{\\\"template\\\":\\\"wxml\\\",\\\"script\\\":\\\"js\\\",\\\"style\\\":\\\"wxss\\\",\\\"platform\\\":\\\"wx\\\"}}!../../../node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/components/vabrrge/index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-5ed08bcc\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-5ed08bcc\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/vabrrge/index.vue\n// module id = 98\n// module chunks = 2","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@4.1.3@vue-style-loader!./node_modules/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5ed08bcc\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./node_modules/_sass-loader@5.0.1@sass-loader/lib/loader.js?{\"sourceMap\":false}!./node_modules/_mpvue-loader@1.4.0@mpvue-loader/lib/selector.js?type=styles&index=0!./src/components/vabrrge/index.vue\n// module id = 99\n// module chunks = 2"],"sourceRoot":""}